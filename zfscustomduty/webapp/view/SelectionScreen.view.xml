<mvc:View
    controllerName="customduty.ui.invoiceposting.controller.SelectionScreen"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:layout="sap.ui.layout"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:unified="sap.ui.unified"
>
    <f:DynamicPage
        id="selectionScreen"
        showFooter="true"
        fitContent="true"
    >
        <f:title>
            <f:DynamicPageTitle id="idSelectionScreenTitle">
                <f:heading>
                    <Title
                        id="idSelectionScreenTitleText"
                        text="{i18n>SelectionScreenTitle}"
                    />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <VBox
                id="idSSVVBox"
                class="sapUiSmallMargin"
            >
                <form:SimpleForm
                    id="idUploadForm"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4"
                    labelSpanL="3"
                    labelSpanM="4"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="0"
                    emptySpanL="4"
                    emptySpanM="0"
                    emptySpanS="0"
                    columnsXL="2"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false"
                >
                    <form:content>
                        <!--  Plant Field  -->
                        <Label
                            id="idSSVPlantLabel"
                            text="{i18n>Plant}"
                            required="true"
                        />
                        <Input
                            id="idSSVPlantInput"
                            showValueHelp="true"
                            width="50%"
                            showValueStateMessage="false"
                            valueState="{= ${uploadChaFileModel>/isPlantFilled} ? 'None' : 'Error'}"
                            valueHelpRequest="onInputValueHelpDialog"
                            showSuggestion="true"
                            change="onInputChange"
                            suggestionItems="{/PlantVH}"
                            suggestionItemSelected=".onSuggestionItemSelected"
                            maxLength="4"
                        >
                            <customData>
                                <core:CustomData
                                    key="CHAModelProperty"
                                    value="isPlantFilled"
                                />
                                <core:CustomData
                                    key="FilterProperty"
                                    value="Plant"
                                />
                            </customData>
                            <suggestionItems>
                                <core:ListItem
                                    key="{Plant}"
                                    text="{PlantName}"
                                    additionalText="{Plant}"
                                />
                            </suggestionItems>
                        </Input>
                        <!--  BE Number Field  -->
                        <Label
                            id="idSSVBENumberLabel"
                            text="{i18n>BENumber}"
                        />
                        <MultiInput
                            id="idSSVBENumberMultiInput"
                            showValueHelp="false"
                            width="50%"
                            showClearIcon="true"
                        />

                        <!--  PO vendor Field  -->
                        <Label
                            id="idSSVPOVendorLabel"
                            text="{i18n>POVendor}"
                        />
                        <Input
                            id="idSSVPOVendorInput"
                            width="50%"
                            showValueHelp="true"
                            showSuggestion="true"
                            showValueStateMessage="false"
                            change="onInputChange"
                            suggestionItems="{/POVendorVH}"
                            suggestionItemSelected=".onSuggestionItemSelected"
                            valueHelpRequest="onInputValueHelpDialog"
                            maxLength="10"
                        >
                            <customData>
                                <core:CustomData
                                    key="FilterProperty"
                                    value="POVendor"
                                />
                            </customData>
                            <suggestionItems>
                                <core:ListItem
                                    key="{Supplier}"
                                    text="{SupplierName}"
                                    additionalText="{Supplier}"
                                />
                            </suggestionItems>
                        </Input>
                        <!--  Custom vendor Field  -->
                        <Label
                            id="idSSVCustomVendorLabel"
                            text="{i18n>CustomVendor}"
                            required="true"
                        />
                        <Input
                            id="idSSVCustomVendortInput"
                            showValueHelp="true"
                            showValueStateMessage="false"
                            width="50%"
                            valueState="{= ${uploadChaFileModel>/isCustomVendorFilled} ? 'None' : 'Error'}"
                            maxLength="10"
                        />
                        <!--  Overseas Freight vendor Field  -->
                        <Label
                            id="idSSVOverseasVendorLabel"
                            text="{i18n>OverseasFreightVendor}"
                        />
                        <Input
                            id="idSSVOverseasVendorInput"
                            width="50%"
                            showValueHelp="true"
                            maxLength="10"
                        />
                        <!--  Local Freight vendor Field  -->
                        <Label
                            id="idSSVLocalFrieghtVendorLabel"
                            text="{i18n>LocalFreightVendor}"
                            required="true"
                        />
                        <Input
                            id="idSSVLocalVendortInput"
                            showValueHelp="true"
                            width="50%"
                            showValueStateMessage="false"
                            valueState="{= ${uploadChaFileModel>/isLocalVendorFilled} ? 'None' : 'Error'}"
                            maxLength="10"
                        />
                        <!--  Insurance vendor Field  -->
                        <Label
                            id="idSSVInsuranceVendorLabel"
                            text="{i18n>InsuranceVendor}"
                            required="true"
                        />
                        <Input
                            id="idSSVInsuranceVendortInput"
                            showValueHelp="true"
                            width="50%"
                            showValueStateMessage="false"
                            valueState="{= ${uploadChaFileModel>/isInsuranceVendorFilled} ? 'None' : 'Error'}"
                            maxLength="10"
                        />

                        <!--  CHA File Browse  -->
                        <Label
                            id="idSSVCHAFileLabel"
                            text="{i18n>CHAFile}"
                            labelFor="idSSVSuppierInvoiceNumberInput"
                            required="true"
                        />
                        <unified:FileUploader
                            uploadComplete="onUploadComplete"
                            valueState="{= ${uploadChaFileModel>/isChaFileFilled} ? 'None' : 'Error'}"
                            valueStateText="{i18n>FieldcanNotBeEmptyMsg}"
                            id="fileUploader"
                            mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                            useMultipart="false"
                            placeholder="{i18n>CHAFile}"
                            sameFilenameAllowed="true"
                            iconOnly="false"
                            buttonOnly="false"
                            fileType="XLSX,xlsx"
                            icon="sap-icon://upload"
                            iconFirst="true"
                            style="Emphasized"
                            change="onInputChange"
                        />
                        <Label
                            id="idSSVFlexBoxLabel"
                            text=""
                        />
                        <FlexBox
                            id="idSSVFlexBox"
                            justifyContent="Start"
                            class="sapUiSmallMarginTop"
                        >
                            <Button
                                id="idSSVClearButton"
                                text="{i18n>Clear}"
                                press="onClearForm"
                                class="sapUiSmallMarginEnd"
                            />
                            <Button
                                id="idSSVUploadButton"
                                text="{i18n>Upload}"
                                press="onSubmitFile"
                                class="sapUiSmallMarginEnd"
                                enabled="{= ${uploadChaFileModel>/isChaFileFilled} &amp;&amp; ${uploadChaFileModel>/isPlantFilled}}"
                            />
                            <!--  <Button
                                id="idUploadCHAFileViewDownloadTemplateButton"
                                type="{AppControl>/style/buttonType}"
                                text="{i18n>DownloadTemplate}"
                                visible="{AppControl>/visibility/isDownloadTemplateVisible}"
                            />  -->
                        </FlexBox>
                    </form:content>
                </form:SimpleForm>
                <t:Table
                    rows="{InvoiceModel>/}"
                    selectionMode="None"
                    class="sapUiSmallMarginTop sapUiTinyMarginBottom"
                    ariaLabelledBy="title"
                >
                    <t:extension>
                        <OverflowToolbar style="Clear">
                            <Title
                                class="sapUiTinyMargin"
                                id="title"
                                text="{i18n>InvoiceTableTitle}"
                            />
                            <ToolbarSpacer />
                            <Button
                                id="idValidateBtn"
                                class="sapUiTinyMargin"
                                text="Validate"
                                enabled="false"
                                type="Emphasized"
                                press="onValidateInvoiceModel"
                            />
                        </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        <t:Column width="11rem">
                            <Label text="{i18n>Invoice}" />
                            <t:template>
                                <Text
                                    text="{InvoiceModel>InvoiceId}"
                                    wrapping="false"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>LocalFreightAmount}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <!-- <unified:Currency
                                    value="{InvoiceModel>TotalAmount}"
                                    currency="{InvoiceModel>CurrencyCode}"
                                /> -->
                                <Input
                                    type="Number"
                                    value="{InvoiceModel>LocalFreightAmount}"
                                    valueState="{InvoiceModel>LocalFreightAmountVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>InsuranceAmount}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <!-- <unified:Currency
                                    value="{InvoiceModel>TotalAmount}"
                                    currency="{InvoiceModel>CurrencyCode}"
                                /> -->
                                <Input
                                    type="Number"
                                    value="{InvoiceModel>InsuranceAmount}"
                                    valueState="{InvoiceModel>InsuranceAmountVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>OverseasFreightAmount}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <!-- <unified:Currency
                                    value="{InvoiceModel>TotalAmount}"
                                    currency="{InvoiceModel>CurrencyCode}"
                                /> -->
                                <Input
                                    type="Number"
                                    value="{InvoiceModel>OverseasFreightAmount}"
                                    valueState="{InvoiceModel>OverseasFreightAmountVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>MiscAmount}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <!-- <unified:Currency
                                    value="{InvoiceModel>TotalAmount}"
                                    currency="{InvoiceModel>CurrencyCode}"
                                /> -->
                                <Input
                                    type="Number"
                                    value="{InvoiceModel>MiscAmount}"
                                    valueState="{InvoiceModel>MiscAmountVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>ForeignCurrency}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <Input
                                    type="Text"
                                    value="{InvoiceModel>ForeignCurrency}"
                                    maxLength="3"
                                    valueState="{InvoiceModel>ForeignCurrencyVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>ExchangeRate}"
                                wrapping="true"
                                required="true"
                            />
                            <t:template>
                                <Input
                                    type="Number"
                                    value="{InvoiceModel>ExchangeRate}"
                                    maxLength="10"
                                    valueState="{InvoiceModel>ExchangeRateVS}"
                                    change="onInvoiceTableInputChange"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>OverseasFreightVendor}"
                                wrapping="true"
                            />
                            <t:template>
                                <Input
                                    type="Text"
                                    value="{InvoiceModel>OverseasFreightVendor}"
                                    valueState="{InvoiceModel>OverseasFreightVendorVS}"
                                    editable="{InvoiceModel>OverseasFreightVendorEditable}"
                                />
                            </t:template>
                        </t:Column>
                        <t:Column width="9rem">
                            <Label
                                text="{i18n>POVendor}"
                                wrapping="true"
                            />
                            <t:template>
                                <Input
                                    type="Text"
                                    value="{InvoiceModel>POVendor}"
                                    valueState="{InvoiceModel>POVendorVS}"
                                    editable="{InvoiceModel>POVendorEditable}"
                                />
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:Table>
            </VBox>
        </f:content>
        <f:footer>
            <OverflowToolbar>
                <Button
                    icon="sap-icon://message-popup"
                    text="{/messagesLength}"
                    type="Emphasized"
                    press="onMessageButtonPress"
                    visible="false"
                />
                <ToolbarSpacer />
                <Button
                    id="idProceedToInvoicePosting"
                    type="Accept"
                    text="Proceed"
                    enabled="false"
                    press="onProceedToInvoicePostingScreen"
                />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
