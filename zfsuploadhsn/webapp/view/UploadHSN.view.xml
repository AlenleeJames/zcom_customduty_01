<mvc:View
    controllerName="customduty.ui.uploadhsn.controller.UploadHSN"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:layout="sap.ui.layout"
    xmlns:t="sap.ui.table"
    xmlns:f="sap.f"
    xmlns:form="sap.ui.layout.form"
    xmlns:unified="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:smartTable="sap.ui.comp.smarttable"
>
    <f:DynamicPage
        id="UploadHSNPage"
        showFooter="true"
        fitContent="true"
    >
        <f:title>
            <f:DynamicPageTitle id="idUploadHSNTitleDis">
                <f:heading>
                    <Title
                        id="idUploadHSNTitleTexDist"
                        text="{i18n>UploadHSNTitle}"
                    />
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>

        <f:content>
            <VBox
                id="idSSVVBoxDis"
                class="sapUiSmallMargin"
            >
                <form:SimpleForm
                    id="idUploadFormDis"
                    editable="true"
                    layout="ColumnLayout"
                >
                    <form:content>
                        <!--  CHA File Browse  -->
                        <Label
                            id="idUHSNFileLabel"
                            text="{i18n>HSNFile}"
                            labelFor="idUHSNLabel"
                            required="true"
                        />
                        <unified:FileUploader
                            uploadComplete="onUploadComplete"
                            id="fileUploader"
                            useMultipart="false"
                            placeholder="{i18n>HSNFile}"
                            sameFilenameAllowed="true"
                            iconOnly="true"
                            buttonOnly="false"
                            fileType="XLSX,xlsx,JSON"
                            icon="sap-icon://upload"
                            iconFirst="true"
                            style="Emphasized"
                            change="onInputChange"
                        />

                        <Label
                            id="idSSVFlexBoxLabel1"
                            text=""
                        />
                        <Button
                            id="idSSVUploadButton"
                            text="{i18n>Upload}"
                            press="onSubmitFile"
                            class="sapUiSmallMarginEnd"
                            width="40%"
                            enabled="{uploadHSAModel>/isHsnFileFilled}"
                        />
                        <Label
                            id="idUHSNFlexBoxLabel"
                            text=""
                        />
                        <Button
                            id="idUHSNClearButton"
                            text="{i18n>DownloadTemplate}"
                            press="onDownloadTemplate"
                            class="sapUiSmallMarginEnd"
                            width="50%"
                        />
                    </form:content>
                </form:SimpleForm>
                <smartTable:SmartTable
                    id="idHSNTablePreview"
                    entitySet="UploadHSN"
                    tableType="ResponsiveTable"
                    enableExport="true"
                    beforeExport="onBeforeExport"
                    useVariantManagement="false"
                    enableAutoColumnWidth="true"
                    useTablePersonalisation="true"
                    header="Line Items"
                    showRowCount="true"
                    persistencyKey="UploadHSNTable"
                    enableAutoBinding="true"
                    requestAtLeastFields="SupplierCountry,HSNCode,TaxRate,TaxCode"
                    demandPopin="true"
                    class="sapUiTinyMarginTop"
                >
                    <smartTable:customToolbar>
                        <OverflowToolbar>
                            <ToolbarSpacer />
                            <OverflowToolbarButton id="idEditTaxToggle"
                                icon="sap-icon://edit"
                                text="Edit"
                                tooltip="Edit"
                                press="onEditTaxDetails"
                            />
                            <OverflowToolbarButton
                                icon="sap-icon://delete"
                                text="Delete"
                                tooltip="Delete"
                                press="onDeleteHSNRecords"
                            />
                        </OverflowToolbar>
                    </smartTable:customToolbar>
                    <Table
                        id="innerUi5Table"
                        growing="true"
                        mode="MultiSelect"
                    >
                        <columns>
                            <Column>
                                <customData>
                                    <core:CustomData
                                        key="p13nData"
                                        value='\{"columnKey": "SupplierCountry", "columnIndex":0, "leadingProperty": "SupplierCountry", "sortProperty": "SupplierCountry", "filterProperty": "SupplierCountry"}'
                                    />
                                </customData>
                                <Text text="Supplier Country" />
                            </Column>
                            <Column>
                                <customData>
                                    <core:CustomData
                                        key="p13nData"
                                        value='\{"columnKey": "HSNCode", "columnIndex":1, "leadingProperty": "HSNCode", "sortProperty": "HSNCode", "filterProperty": "HSNCode"}'
                                    />
                                </customData>
                                <Text text="HSN Code" />
                            </Column>
                            <Column>
                                <customData>
                                    <core:CustomData
                                        key="p13nData"
                                        value='\{"columnKey": "TaxRate", "columnIndex":2, "leadingProperty": "TaxRate", "sortProperty": "TaxRate", "filterProperty": "TaxRate"}'
                                    />
                                </customData>
                                <Text text="Tax Rate" />
                            </Column>
                            <Column>
                                <customData>
                                    <core:CustomData
                                        key="p13nData"
                                        value='\{"columnKey": "TaxCode", "columnIndex":3, "leadingProperty": "TaxCode", "sortProperty": "TaxCode", "filterProperty": "TaxCode"}'
                                    />
                                </customData>
                                <Text text="Tax Code" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <Text text="{SupplierCountry}" />
                                <Text text="{HSNCode}" />
                                <Input
                                    value="{TaxRate}"
                                    editable="{uploadHSAModel>/isEditEnabled}"
                                    change="onTaxInputChange"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="Property"
                                            value='TaxRate'
                                        />
                                    </customData>
                                </Input>
                                <Input
                                    value="{TaxCode}"
                                    editable="{uploadHSAModel>/isEditEnabled}"
                                    change="onTaxInputChange"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="Property"
                                            value='TaxCode'
                                        />
                                    </customData>
                                </Input>
                            </ColumnListItem>
                        </items>
                    </Table>
                </smartTable:SmartTable>
            </VBox>
        </f:content>
        <f:footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    id="idSave"
                    type="Accept"
                    text="Save"
                    press="onSaveTaxDetails"
                />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
